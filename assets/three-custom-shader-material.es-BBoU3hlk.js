import{r as t,o as u}from"./chunk-EPOLDU6W-B0aIzJ9t.js";import{j as h}from"./three-custom-shader-material.es-DomXwfiO.js";function m(c,r){const e=t.useRef(!1);t.useEffect(()=>{if(e.current)return c();e.current=!0},r)}function d({baseMaterial:c,vertexShader:r,fragmentShader:e,uniforms:o,cacheKey:s,patchMap:f,attach:p,...n},i){const a=t.useMemo(()=>new h({baseMaterial:c,vertexShader:r,fragmentShader:e,uniforms:o,cacheKey:s,patchMap:f,...n}),[c]);return m(()=>{a.dispose(),a.update({vertexShader:r,fragmentShader:e,uniforms:o,patchMap:f,cacheKey:s})},[r,e,o,f,s]),t.useEffect(()=>()=>a.dispose(),[a]),u.jsx("primitive",{ref:i,attach:p??"material",object:a,...n})}const M=t.forwardRef(d);export{M as j};
