import{e as u,r as n}from"./chunk-EPOLDU6W-D-U-5P6E.js";import{bc as E,bd as l}from"./extends-DZFUuLD4.js";const k=e=>e;function w(e,r=k){const t=u.useSyncExternalStore(e.subscribe,u.useCallback(()=>r(e.getState()),[e,r]),u.useCallback(()=>r(e.getInitialState()),[e,r]));return u.useDebugValue(t),t}const y=e=>{const r=E(e),t=s=>w(r,s);return Object.assign(t,r),t},x=(e=>e?y(e):y);let c=0;const I=x(e=>(l.onStart=(r,t,s)=>{e({active:!0,item:r,loaded:t,total:s,progress:(t-c)/(s-c)*100})},l.onLoad=()=>{e({active:!1})},l.onError=r=>e(t=>({errors:[...t.errors,r]})),l.onProgress=(r,t,s)=>{t===s&&(c=s),e({active:!0,item:r,loaded:t,total:s,progress:(t-c)/(s-c)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),L=e=>`Loading ${e.toFixed(2)}%`;function C({containerStyles:e,innerStyles:r,barStyles:t,dataStyles:s,dataInterpolation:d=L,initialState:h=o=>o}){const{active:o,progress:a}=I(),i=n.useRef(0),b=n.useRef(0),m=n.useRef(null),[g,v]=n.useState(h(o));n.useEffect(()=>{let S;return o!==g&&(S=setTimeout(()=>v(o),300)),()=>clearTimeout(S)},[g,o]);const p=n.useCallback(()=>{m.current&&(i.current+=(a-i.current)/2,(i.current>.95*a||a===100)&&(i.current=a),m.current.innerText=d(i.current),i.current<a&&(b.current=requestAnimationFrame(p)))},[d,a]);return n.useEffect(()=>(p(),()=>cancelAnimationFrame(b.current)),[p]),g?n.createElement("div",{style:{...f.container,opacity:o?1:0,...e}},n.createElement("div",null,n.createElement("div",{style:{...f.inner,...r}},n.createElement("div",{style:{...f.bar,transform:`scaleX(${a/100})`,...t}}),n.createElement("span",{ref:m,style:{...f.data,...s}})))):null}const f={container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#171717",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:100,height:3,background:"#272727",textAlign:"center"},bar:{height:3,width:"100%",background:"white",transition:"transform 200ms",transformOrigin:"left center"},data:{display:"inline-block",position:"relative",fontVariantNumeric:"tabular-nums",marginTop:"0.8em",color:"#f0f0f0",fontSize:"0.6em",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap"}};export{C as L};
