import{R as v,r as e}from"./chunk-EPOLDU6W-B0aIzJ9t.js";import{b9 as H,ba as E,ah as O,n as P,ai as V,ax as j}from"./OrbitControls-BjQ9zg-v.js";const M=t=>t;function N(t,r=M){const n=v.useSyncExternalStore(t.subscribe,v.useCallback(()=>r(t.getState()),[t,r]),v.useCallback(()=>r(t.getInitialState()),[t,r]));return v.useDebugValue(n),n}const B=t=>{const r=H(t),n=s=>N(r,s);return Object.assign(n,r),n},$=(t=>t?B(t):B);let h=0;const q=$(t=>(E.onStart=(r,n,s)=>{t({active:!0,item:r,loaded:n,total:s,progress:(n-h)/(s-h)*100})},E.onLoad=()=>{t({active:!1})},E.onError=r=>t(n=>({errors:[...n.errors,r]})),E.onProgress=(r,n,s)=>{n===s&&(h=s),t({active:!0,item:r,loaded:n,total:s,progress:(n-h)/(s-h)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),W=t=>`Loading ${t.toFixed(2)}%`;function J({containerStyles:t,innerStyles:r,barStyles:n,dataStyles:s,dataInterpolation:g=W,initialState:S=a=>a}){const{active:a,progress:i}=q(),c=e.useRef(0),p=e.useRef(0),l=e.useRef(null),[f,y]=e.useState(S(a));e.useEffect(()=>{let d;return a!==f&&(d=setTimeout(()=>y(a),300)),()=>clearTimeout(d)},[f,a]);const u=e.useCallback(()=>{l.current&&(c.current+=(i-c.current)/2,(c.current>.95*i||i===100)&&(c.current=i),l.current.innerText=g(c.current),c.current<i&&(p.current=requestAnimationFrame(u)))},[g,i]);return e.useEffect(()=>(u(),()=>cancelAnimationFrame(p.current)),[u]),f?e.createElement("div",{style:{...b.container,opacity:a?1:0,...t}},e.createElement("div",null,e.createElement("div",{style:{...b.inner,...r}},e.createElement("div",{style:{...b.bar,transform:`scaleX(${i/100})`,...n}}),e.createElement("span",{ref:l,style:{...b.data,...s}})))):null}const b={container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#171717",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:100,height:3,background:"#272727",textAlign:"center"},bar:{height:3,width:"100%",background:"white",transition:"transform 200ms",transformOrigin:"left center"},data:{display:"inline-block",position:"relative",fontVariantNumeric:"tabular-nums",marginTop:"0.8em",color:"#f0f0f0",fontSize:"0.6em",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap"}},K=e.forwardRef(function({children:r,object:n,disable:s,disableX:g,disableY:S,disableZ:a,left:i,right:c,top:p,bottom:l,front:f,back:y,onCentered:u,precise:d=!0,cacheKey:T=0,...U},D){const x=e.useRef(null),w=e.useRef(null),k=e.useRef(null),[o]=e.useState(()=>new O),[m]=e.useState(()=>new P),[R]=e.useState(()=>new V);return e.useLayoutEffect(()=>{w.current.matrixWorld.identity(),o.setFromObject(n??k.current,d);const A=o.max.x-o.min.x,I=o.max.y-o.min.y,L=o.max.z-o.min.z;o.getCenter(m),o.getBoundingSphere(R);const C=p?I/2:l?-I/2:0,z=i?-A/2:c?A/2:0,F=f?L/2:y?-L/2:0;w.current.position.set(s||g?0:-m.x+z,s||S?0:-m.y+C,s||a?0:-m.z+F),u?.({parent:x.current.parent,container:x.current,width:A,height:I,depth:L,boundingBox:o,boundingSphere:R,center:m,verticalAlignment:C,horizontalAlignment:z,depthAlignment:F})},[T,u,p,i,f,s,g,S,a,n,d,c,l,y,o,m,R]),e.useImperativeHandle(D,()=>x.current,[]),e.createElement("group",j({ref:x},U),e.createElement("group",{ref:w},e.createElement("group",{ref:k},r)))});export{K as C,J as L};
